.password-strength {
    @extend .text-body-secondary;
    margin-top: 0.5rem;
    font-size: 0.875em;

    .password-strength-header {
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        margin-bottom: 0.5rem;
    }

    .password-strength-status {
        font-weight: 600;
        text-align: end;
        min-width: 10ch; // Reserve space to reduce layout shift when text appears/changes
    }

    .password-strength-progress {
        @extend .bg-body-secondary;
        --bs-progress-height: 0.5rem;
    }

    .password-strength-progress-bar {
        background: var(--bs-border-color);
    }

    .password-strength-hint-text {
        margin: 0.5rem 0 0.375rem;
    }

    .password-strength-hints {
        opacity: 0.9;
        padding-inline-start: 1rem; // RTL-aware
        margin-bottom: 0;

        li + li {
            margin-top: 0.2rem;
        }
    }

    &[data-level="weak"] {
        .password-strength-status {
            color: var(--bs-danger-text-emphasis);
        }
        .password-strength-progress-bar {
            background: $danger;
        }
    }
    &[data-level="fair"] {
        .password-strength-status {
            color: var(--bs-warning-text-emphasis);
        }
        .password-strength-progress-bar {
            background: $warning;
        }
    }
    &[data-level="good"] {
        .password-strength-status {
            color: var(--bs-info-text-emphasis);
        }
        .password-strength-progress-bar {
            background: $info;
        }
    }
    &[data-level="strong"] {
        .password-strength-status {
            color: var(--bs-success-text-emphasis);
        }
        .password-strength-progress-bar {
            background: $success;
        }
    }
    &[data-level="perfect"] {
        .password-strength-status {
            color: var(--bs-success-text-emphasis);
        }
        .password-strength-progress-bar {
            // Layer 1: smooth rainbow cycle; Layer 2: soft gloss
            background:
                repeating-linear-gradient(
                    90deg,
                    #ff7f50 0%,
                    #ffd166 18%,
                    #60d394 36%,
                    #4cb5f5 54%,
                    #6f2dbd 72%,
                    #b5179e 90%,
                    #ff7f50 100%
                ),
                linear-gradient(
                    180deg,
                    rgba(255, 255, 255, 0.18),
                    rgba(255, 255, 255, 0)
                );
            background-size:
                200% 100%,
                100% 100%;
            background-position:
                0 0,
                0 0;
            box-shadow:
                inset 0 0 0 1px rgba(0, 0, 0, 0.06),
                0 0 12px rgba(255, 128, 0, 0.16);
            animation:
                rainbow-shift 6s linear infinite,
                rainbow-pulse 3.2s ease-in-out infinite;
        }
    }
}

@keyframes rainbow-shift {
    from {
        background-position:
            0% 0,
            0 0;
    }
    to {
        background-position:
            -200% 0,
            0 0;
    }
}

@keyframes rainbow-pulse {
    0%,
    100% {
        box-shadow:
            inset 0 0 0 1px rgba(0, 0, 0, 0.05),
            0 0 10px rgba(255, 128, 0, 0.16);
    }
    50% {
        box-shadow:
            inset 0 0 0 1px rgba(0, 0, 0, 0.05),
            0 0 16px rgba(255, 128, 0, 0.28);
    }
}

@media (prefers-reduced-motion: reduce) {
    .password-strength[data-level="perfect"] .password-strength-progress-bar {
        animation: none;
        background-size:
            100% 100%,
            100% 100%;
    }
}
